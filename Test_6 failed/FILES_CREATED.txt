# Sand Simulation - Files Created

## Summary
Your biped robot can now walk on sand with 966 particles in 3 layers.

## New Files Created

### Core Simulation Files
1. **legged_robot_sand.xml** (135 KB)
   - MuJoCo model with robot and 966 sand balls
   - Ready to use - no modifications needed

2. **walk_with_sand.py** (6.4 KB)
   - Main walking simulator
   - Loads joint trajectories and applies them to robot
   - Uses PD control for smooth motion
   - Includes base motion control for forward walking
   - Opens MuJoCo viewer for real-time visualization

3. **generate_sand_xml.py** (8.6 KB)
   - Script that generated legged_robot_sand.xml
   - Can be re-run to change sand parameters
   - Programmatically creates all 966 ball definitions

### Documentation Files
4. **SAND_SIMULATION_SETUP.md** (5.6 KB)
   - Comprehensive setup guide
   - Parameters, troubleshooting, customization
   - Physics notes and expected behavior

5. **QUICK_START.md** (8+ KB)
   - Quick reference guide
   - Running instructions
   - Customization examples
   - Physics explanation

6. **run_sand_demo.py** (1.1 KB)
   - Quick launcher script
   - Checks dependencies and starts simulation

## To Run the Simulation

```bash
# Make sure you have trajectory data (from generate_simple_ik.py):
python generate_simple_ik.py

# Then run:
python walk_with_sand.py
```

Or simply:
```bash
python run_sand_demo.py
```

## Sand Configuration Generated

- **Total balls:** 966 (organized in 3 layers)
- **Ball radius:** 0.0075m (7.5mm)
- **Spacing:** 0.015m center-to-center (prevents penetration)
- **Layers:** 3
  - Layer 1 (bottom): Z = 0.445m
  - Layer 2 (middle): Z = 0.460m  
  - Layer 3 (top):    Z = 0.475m
- **Area covered:** ~0.9m × 0.57m
- **Ball mass:** 0.001 kg each (1 gram)

## Robot Parameters

- **Gait cycle:** 50 seconds
- **Forward speed:** 6 mm/s
- **Joint control:** PD with Kp=300, Kd=30
- **Base control:** PD with Kp=500, Kd=50

## What the Simulation Does

1. Loads pre-computed joint angle trajectories
2. Applies them to robot via PD controllers
3. Robot walks forward on sand at 6 mm/s
4. Sand balls deform under foot contact
5. Real-time viewer shows walking motion

## Key Features

✅ 966 sand particles (not just 1 block of sand)
✅ 3-layer sand arrangement
✅ Physics-based contact and friction
✅ Real-time MuJoCo visualization
✅ Configurable walking parameters
✅ Smooth joint motion via cubic spline interpolation

## Dependencies (should already be installed)

- `mujoco` - Physics engine
- `numpy` - Numerical computation
- `scipy` - Interpolation
- `matplotlib` (optional) - For plotting trajectories

All required trajectory files (.npy) are generated by `generate_simple_ik.py`

## Next Steps

1. Run `python walk_with_sand.py` to see the robot walk on sand
2. Observe sand deformation under foot contact
3. Adjust parameters in the Python scripts to experiment with:
   - Different sand densities
   - Different friction values
   - Faster/slower walking speeds
   - Different gait patterns

See **QUICK_START.md** for detailed customization examples.

